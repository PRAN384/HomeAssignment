# -*- coding: utf-8 -*-
#:kivy 1.9.1

<UsblGauge>:
    size_hint: (1, 1)
    pos_hint: 1,1
    canvas:
        Color:
            rgba:(50/255,204/255,255/255,1)
        Rectangle:
            pos:dp(3),dp(2)
            size:200,200
        Rectangle:
            source: root.resource_path('boxfish/resources/images/c3.png')

            pos:dp(3),dp(2)#self.width/2 -dp(100), self.height/2  #dp(3),dp(2)#
            size:200,200

    Widget:
        id: wid2 # Image:
        pos:0,0#self.width/2 -dp(100), self.height/2 
        size_hint: None, None
        size: dp(200), dp(200)
        canvas.before:
            PushMatrix
            Rotate:
                angle: root.heading_angle_boat#root.heading # heading of the BOAT
                origin: dp(3)+100,dp(2)+100
        canvas:
            Color:
                rgb:(1,1,1,1)
            Rectangle:
                # size:root.imsize*0.3,root.imsize*0.3
                # pos:dp(3)+100-root.imsize*0.3/2,dp(2)+100-root.imsize*0.3/2#self.width/2 -dp(100), self.height/2  #dp(3),dp(2)#
                size:200*0.3,200*0.3
                pos:dp(3)+100-200*0.3/2,dp(2)+100-200*0.3/2#self.width/2 -dp(100), self.height/2  #dp(3),dp(2)#

                source: root.resource_path('boxfish/resources/images/b1.png')
        canvas.after:
            PopMatrix

    Widget:
        id: traj # Image:
        pos:0,0#self.width/2 -dp(100), self.height/2 
        size_hint: None, None
        size: dp(200), dp(200)
        canvas.before:
            PushMatrix
            Rotate:
                angle: 0 # heading of the ROV
                origin: dp(3)+int(root.exP),dp(2)+int(root.yP)
        canvas:
            Color:
                rgb: (.5,.8,0.1)
            Line:
                width: 1
                points: root.trajectory
                    
        canvas.after:
            PopMatrix

    Widget:
        id: wid1 # Image:
        pos:0,0#self.width/2 -dp(100), self.height/2 
        size_hint: None, None
        size: dp(200), dp(200)
        canvas.before:
            PushMatrix
            Rotate:
                angle: 90 + -root.heading_angle_rov # heading of the ROV
                origin: dp(3)+int(root.exP),dp(2)+int(root.yP)
        canvas:
            Color: 
                rgb: (1,0,1)
            Rectangle:
                size:15, 15
                pos:dp(3)+int(root.exP) - 15/2,dp(2)+int(root.yP)- 15/2#int(root.exP)+dp(3)+root.imsize/2 -(25/2),int(root.yP)+dp(2)+root.imsize/2-(25/2)#+int(root.exP) - 25/2,dp(2)+int(root.yP)- 25/2
                source: root.resource_path('boxfish/resources/images/arrow.png')
        canvas.after:
            PopMatrix

    RelativeLayout:
        size_hint: None, None
        size: 100, 80
        pos: 60,0

        BoxLayout:
            orientation:'vertical'
            Label:
                font_size: 10
                text:str(1*root.round_distance(root.gscale)).split('.0')[0] + ' m'
                color: background_color
                # pos_hint: 0,60
            Label:
                font_size: 10
                text:str(2*root.round_distance(root.gscale)).split('.0')[0] + ' m'
                color: background_color
                # pos: 0,30
            Label:
                font_size: 10
                text:str(3*root.round_distance(root.gscale)).split('.0')[0] + ' m'
                color: background_color
                # pos: 0,0

    RelativeLayout:
        size_hint: None, None
        size: 140, 170# 180
        pos: 230,25

        BoxLayout:
            orientation:'vertical'
            BoxLayout:
                orientation:'horizontal'
                spacing: 15
                Label:
                    font_size: 13
                    text:'Updated'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    size_hint:0.3,1
                    text:str(root.calc_time(root.last_heard))+'s ago'

            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Status'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60

                Label:
                    font_size: 13
                    text:"    "+str(root.usblmsg)
                    size_hint:0.3,1
                    # pos: 0,30

            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Distance'
                    size_hint:0.5,1
                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60           
                Label:
                    font_size: 13
                    text:str(root.distance)+" m"
                    size_hint:0.3,1
                    #pos: 0,30

            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Slant Range'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.distance2)+" m"
                    size_hint:0.3,1
                    # pos: 0,30

            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Direction'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.direction)+" o'clock"
                    size_hint:0.3,1
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:' '
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:' '
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:' '
                    size_hint:0.3,1
# #### Gps Gauge###############################

# Last Updated
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'GPS '
                    size_hint:0.5,1

                Label:

            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Status '
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.gps_status)
                    size_hint:0.3,1
                
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:' Updated '
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.calc_time(root.last_heard_gps))+'s ago'
                    size_hint:0.3,1
# Latitude
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Lat'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.RLat)
                    size_hint:0.3,1

# Longitude
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Long'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.RLong)
                    size_hint:0.3,1
                    # pos: 0,30
# Longitude
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Date'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.date)
                    size_hint:0.3,1
                    # pos: 0,30
            BoxLayout:
                orientation:'horizontal'
                spacing: 20
                Label:
                    font_size: 13
                    text:'Time'
                    size_hint:0.5,1

                Label:
                    font_size: 13
                    text:':'
                    size_hint:0.1,1
                    # pos_hint: 0,60
                
                Label:
                    font_size: 13
                    text:str(root.time)
                    size_hint:0.3,1
                    # pos: 0,30
